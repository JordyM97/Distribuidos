(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["pages-detalle-servicio-detalle-servicio-module"],{

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/detalle-servicio/detalle-servicio.page.html":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/detalle-servicio/detalle-servicio.page.html ***!
  \*********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header [translucent]=\"true\">\r\n  <ion-toolbar class=\"toolbar-bg\">\r\n    <div class=\"toolbar-content\">\r\n      <ion-button fill=\"clear\" slot=\"start\">\r\n        <ion-menu-button color=\"light\" slot=\"start\"></ion-menu-button>\r\n      </ion-button>\r\n\r\n\r\n      <ion-title class=\"ion-text-center\" text-capitalize>\r\n        Servicio en curso\r\n      </ion-title>\r\n\r\n\r\n      <ion-avatar>\r\n        <img src=\"assets/icon/avatar.png\">\r\n      </ion-avatar>\r\n\r\n    </div>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <div #map id=\"mapaViaje\"></div>\r\n  <div id=\"header\">\r\n    <h5>DETALLE DEL SERVICIO</h5>\r\n  </div>\r\n\r\n  <div id=\"content\">\r\n    <ion-row><strong>Conductor: </strong>{{shareData.detallesDriver.data.nombre}} {{shareData.detallesDriver.data.apellido}}</ion-row>\r\n    <ion-row><strong>Calificacion: </strong>{{shareData.detallesDriver.data.calificacion}}</ion-row>\r\n    <ion-row><strong>Numero conductor: </strong>{{shareData.detallesDriver.data.telefono}}</ion-row>\r\n    <ion-row><strong>Modelo del vehículo: </strong>{{shareData.detallesDriver.data.modelo}}</ion-row>\r\n    <ion-row><strong>Placa del vehículo: </strong>{{shareData.detallesDriver.data.placa}}</ion-row>\r\n    <ion-row><strong>Color del vehículo: </strong>{{shareData.detallesDriver.data.color}}</ion-row>\r\n  </div>\r\n\r\n  <!-- fab que contiene los botones para chat y llamada -->\r\n  <ion-fab vertical=\"center\" horizontal=\"end\" slot=\"fixed\" color=\"tertiary\">\r\n    <ion-fab-button id=\"chatbubble\" (click)=\"chatWithClient()\">\r\n      <ion-icon name=\"chatbubble-outline\"></ion-icon>\r\n    </ion-fab-button>\r\n    \r\n    <ion-fab-button id=\"callbubble\" (click)=\"callByCellphone()\">\r\n      <ion-icon name=\"call-outline\"></ion-icon>\r\n    </ion-fab-button>\r\n  </ion-fab>\r\n\r\n</ion-content>\r\n");

/***/ }),

/***/ "./src/app/pages/detalle-servicio/detalle-servicio-routing.module.ts":
/*!***************************************************************************!*\
  !*** ./src/app/pages/detalle-servicio/detalle-servicio-routing.module.ts ***!
  \***************************************************************************/
/*! exports provided: DetalleServicioPageRoutingModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DetalleServicioPageRoutingModule", function() { return DetalleServicioPageRoutingModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _detalle_servicio_page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./detalle-servicio.page */ "./src/app/pages/detalle-servicio/detalle-servicio.page.ts");




const routes = [
    {
        path: '',
        component: _detalle_servicio_page__WEBPACK_IMPORTED_MODULE_3__["DetalleServicioPage"]
    }
];
let DetalleServicioPageRoutingModule = class DetalleServicioPageRoutingModule {
};
DetalleServicioPageRoutingModule = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        imports: [_angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterModule"].forChild(routes)],
        exports: [_angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterModule"]],
    })
], DetalleServicioPageRoutingModule);



/***/ }),

/***/ "./src/app/pages/detalle-servicio/detalle-servicio.module.ts":
/*!*******************************************************************!*\
  !*** ./src/app/pages/detalle-servicio/detalle-servicio.module.ts ***!
  \*******************************************************************/
/*! exports provided: DetalleServicioPageModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DetalleServicioPageModule", function() { return DetalleServicioPageModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js");
/* harmony import */ var _detalle_servicio_routing_module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./detalle-servicio-routing.module */ "./src/app/pages/detalle-servicio/detalle-servicio-routing.module.ts");
/* harmony import */ var _detalle_servicio_page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./detalle-servicio.page */ "./src/app/pages/detalle-servicio/detalle-servicio.page.ts");







let DetalleServicioPageModule = class DetalleServicioPageModule {
};
DetalleServicioPageModule = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormsModule"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["IonicModule"],
            _detalle_servicio_routing_module__WEBPACK_IMPORTED_MODULE_5__["DetalleServicioPageRoutingModule"]
        ],
        declarations: [_detalle_servicio_page__WEBPACK_IMPORTED_MODULE_6__["DetalleServicioPage"]]
    })
], DetalleServicioPageModule);



/***/ }),

/***/ "./src/app/pages/detalle-servicio/detalle-servicio.page.scss":
/*!*******************************************************************!*\
  !*** ./src/app/pages/detalle-servicio/detalle-servicio.page.scss ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2RldGFsbGUtc2VydmljaW8vZGV0YWxsZS1zZXJ2aWNpby5wYWdlLnNjc3MifQ== */");

/***/ }),

/***/ "./src/app/pages/detalle-servicio/detalle-servicio.page.ts":
/*!*****************************************************************!*\
  !*** ./src/app/pages/detalle-servicio/detalle-servicio.page.ts ***!
  \*****************************************************************/
/*! exports provided: DetalleServicioPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DetalleServicioPage", function() { return DetalleServicioPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js");
/* harmony import */ var src_app_services_share_data_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/services/share-data.service */ "./src/app/services/share-data.service.ts");
/* harmony import */ var _ionic_native_geolocation_ngx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ionic-native/geolocation/ngx */ "./node_modules/@ionic-native/geolocation/__ivy_ngcc__/ngx/index.js");






let DetalleServicioPage = class DetalleServicioPage {
    constructor(geolocation, alertController, shareData, router, popoverController) {
        this.geolocation = geolocation;
        this.alertController = alertController;
        this.shareData = shareData;
        this.router = router;
        this.popoverController = popoverController;
        this.mapa = null;
        this.marker = null;
        //Numero del Cliente, debe llegar en la notificacion
        this.numberClient = "0989878654";
        this.directionsService = new google.maps.DirectionsService();
        this.directionsDisplay = new google.maps.DirectionsRenderer();
        this.nombreNot = "";
        this.notObj = {};
    }
    ngOnInit() {
    }
    ionViewWillEnter() {
        this.loadMap();
        this.watchPosition();
    }
    loadMap() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            // create a new map by passing HTMLElement
            const mapEle = document.getElementById('mapaViaje');
            const indicatorsEle = document.getElementById('indicators');
            // create map
            this.mapa = yield new google.maps.Map(mapEle, {
                zoom: 17,
                zoomControl: false,
                mapTypeControl: false,
                streetViewControl: false,
                fullscreenControl: false
            });
            yield this.directionsDisplay.setMap(this.mapa);
            yield google.maps.event.addListenerOnce(this.mapa, 'idle', () => {
                mapEle.classList.add('show-map');
                this.calculateRoute(this.shareData.notificacion.data.inicioCoords, this.shareData.notificacion.data.finCoords);
            });
        });
    }
    calculateRoute(ini, fin) {
        this.directionsService.route({
            origin: JSON.parse(ini),
            destination: JSON.parse(fin),
            travelMode: google.maps.TravelMode.DRIVING,
        }, (response, status) => {
            if (status === google.maps.DirectionsStatus.OK) {
                this.directionsDisplay.setDirections(response);
            }
            else {
                alert('No se pudo cargar el mapa ' + status);
            }
        });
    }
    watchPosition() {
        this.watch = this.geolocation.watchPosition();
        this.watch.subscribe((data) => {
            if (this.marker != null) {
                this.marker.setMap(null);
                console.log("entro");
            }
            if ("coords" in data) {
                let lat = data.coords.latitude;
                let lng = data.coords.longitude;
                console.log("latitud " + lat);
                console.log("longitud " + lng);
                let latLng = new google.maps.LatLng(lat, lng);
                this.marker = new google.maps.Marker({
                    map: this.mapa,
                    icon: new google.maps.MarkerImage('https://maps.gstatic.com/mapfiles/mobile/mobileimgs2.png', new google.maps.Size(22, 22), new google.maps.Point(0, 18), new google.maps.Point(11, 11)),
                    position: latLng
                });
            }
            else {
                console.log("ERROR WATCH POSITION");
            }
        });
    }
};
DetalleServicioPage.ctorParameters = () => [
    { type: _ionic_native_geolocation_ngx__WEBPACK_IMPORTED_MODULE_5__["Geolocation"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_3__["AlertController"] },
    { type: src_app_services_share_data_service__WEBPACK_IMPORTED_MODULE_4__["ShareDataService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_3__["PopoverController"] }
];
DetalleServicioPage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-detalle-servicio',
        template: Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! raw-loader!./detalle-servicio.page.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/detalle-servicio/detalle-servicio.page.html")).default,
        styles: [Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! ./detalle-servicio.page.scss */ "./src/app/pages/detalle-servicio/detalle-servicio.page.scss")).default]
    })
], DetalleServicioPage);



/***/ })

}]);
//# sourceMappingURL=pages-detalle-servicio-detalle-servicio-module-es2015.js.map