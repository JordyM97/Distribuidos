{"version":3,"sources":["webpack:///src/app/pages/detalle-servicio/detalle-servicio.page.html","webpack:///src/app/pages/detalle-servicio/detalle-servicio-routing.module.ts","webpack:///src/app/pages/detalle-servicio/detalle-servicio.module.ts","webpack:///src/app/pages/detalle-servicio/detalle-servicio.page.scss","webpack:///src/app/pages/detalle-servicio/detalle-servicio.page.ts"],"names":["routes","path","component","DetalleServicioPageRoutingModule","imports","forChild","exports","DetalleServicioPageModule","declarations","DetalleServicioPage","geolocation","alertController","shareData","router","firestore","popoverController","mapa","marker","markerD","numberClient","directionsService","google","maps","DirectionsService","directionsDisplay","DirectionsRenderer","nombreNot","notObj","loadMap","watchPosition","watchDriverPos","mapEle","document","getElementById","indicatorsEle","Map","zoom","zoomControl","mapTypeControl","streetViewControl","fullscreenControl","setMap","event","addListenerOnce","classList","add","calculateRoute","notificacion","data","inicioCoords","finCoords","ini","fin","route","origin","JSON","parse","destination","travelMode","TravelMode","DRIVING","response","status","DirectionsStatus","OK","setDirections","alert","watch","subscribe","console","log","lat","coords","latitude","lng","longitude","latLng","LatLng","Marker","map","icon","MarkerImage","Size","Point","position","id","PositionD","doc","valueChanges","val","location","myLatLng","selector","template"],"mappings":"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","file":"pages-detalle-servicio-detalle-servicio-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar class=\\\"toolbar-bg\\\">\\r\\n    <div class=\\\"toolbar-content\\\">\\r\\n      <ion-button fill=\\\"clear\\\" slot=\\\"start\\\">\\r\\n        <ion-menu-button color=\\\"light\\\" slot=\\\"start\\\"></ion-menu-button>\\r\\n      </ion-button>\\r\\n\\r\\n\\r\\n      <ion-title class=\\\"ion-text-center\\\" text-capitalize>\\r\\n        Servicio en curso\\r\\n      </ion-title>\\r\\n\\r\\n\\r\\n      <ion-avatar>\\r\\n        <img src=\\\"assets/icon/avatar.png\\\">\\r\\n      </ion-avatar>\\r\\n\\r\\n    </div>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div id=\\\"mapaViaje\\\"></div>\\r\\n  <div id=\\\"header\\\">\\r\\n    <h5>DETALLE DEL SERVICIO</h5>\\r\\n  </div>\\r\\n\\r\\n  <div id=\\\"content\\\">\\r\\n    <ion-row><strong>Nombre: </strong>  {{shareData.detallesDriver.data.nombreConductor}} {{shareData.detallesDriver.data.apellidoConductor}}</ion-row>\\r\\n    <ion-row><strong>Calificacion: </strong>  {{shareData.detallesDriver.data.calificacionConductor}}</ion-row>\\r\\n    <ion-row><strong>Celular: </strong>  {{shareData.detallesDriver.data.telefonoConductor}}</ion-row>\\r\\n    \\r\\n    <ion-row><strong>Modelo del vehículo: </strong>  {{shareData.detallesDriver.data.modeloVehiculo}}</ion-row>\\r\\n    <ion-row><strong>Placa del vehículo: </strong>  {{shareData.detallesDriver.data.placaVehiculo}}</ion-row>\\r\\n    <ion-row><strong>Color del vehículo: </strong>  {{shareData.detallesDriver.data.colorVehiculo}}</ion-row>\\r\\n  </div>\\r\\n\\r\\n  <!-- fab que contiene los botones para chat y llamada -->\\r\\n  <ion-fab horizontal=\\\"end\\\" vertical=\\\"bottom\\\" slot=\\\"fixed\\\">\\r\\n    <ion-fab-button color=\\\"light\\\">\\r\\n      <ion-icon name=\\\"share\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n    <ion-fab-list side=\\\"top\\\">\\r\\n      <ion-fab-button color=\\\"primary\\\" (click)=\\\"chatWithClient()\\\">\\r\\n        <ion-icon name=\\\"chatbubble-outline\\\"></ion-icon>\\r\\n      </ion-fab-button>\\r\\n    </ion-fab-list>\\r\\n    \\r\\n    <ion-fab-list side=\\\"start\\\">\\r\\n      <ion-fab-button color=\\\"light\\\" (click)=\\\"callByCellphone()\\\">\\r\\n        <ion-icon name=\\\"call-outline\\\"></ion-icon>\\r\\n      </ion-fab-button>\\r\\n    </ion-fab-list>\\r\\n  </ion-fab>\\r\\n  \\r\\n\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DetalleServicioPage } from './detalle-servicio.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DetalleServicioPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DetalleServicioPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DetalleServicioPageRoutingModule } from './detalle-servicio-routing.module';\r\n\r\nimport { DetalleServicioPage } from './detalle-servicio.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DetalleServicioPageRoutingModule\r\n  ],\r\n  declarations: [DetalleServicioPage]\r\n})\r\nexport class DetalleServicioPageModule {}\r\n","export default \"ion-content #mapaViaje {\\n  width: 100%;\\n  height: 50%;\\n  opacity: 0;\\n  transition: opacity 150ms ease-in;\\n}\\nion-content #mapaViaje.show-map {\\n  opacity: 1;\\n}\\n#header {\\n  text-align: left;\\n  background: linear-gradient(-90deg, #20478B, #2487C9);\\n  color: white;\\n  font-size: 12px;\\n  height: 50px;\\n  padding-top: 3px;\\n  padding-left: 5px;\\n  /* h5{\\n   height: 100%;    \\n   background: linear-gradient(#20478c ,#2485c9);\\n   color:white;\\n   }*/\\n}\\n#confirmar {\\n  --background: #E5242F;\\n  width: 100%;\\n}\\n#finalizar {\\n  --background:#808289;\\n  width: 100%;\\n}\\n.detalles {\\n  font-weight: bold;\\n}\\n#botones {\\n  display: grid;\\n  width: 100%;\\n  grid-template-rows: repeat(2, 50%);\\n  justify-content: space-evenly;\\n  align-content: center;\\n}\\n#content {\\n  display: grid;\\n  width: 90%;\\n  height: 40%;\\n  padding-left: 5%;\\n  font-size: 16px;\\n  grid-template-rows: 24px 24px repeat(3, 20px);\\n  justify-content: center;\\n  align-content: center;\\n  grid-row: row gap 10px;\\n}\\n#chatbubble {\\n  --padding-top: 15px;\\n}\\n#chatbubbleF {\\n  padding-left: 15px;\\n}\\nion-fab-button {\\n  margin: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZGV0YWxsZS1zZXJ2aWNpby9DOlxcVXNlcnNcXG1lZGluXFxEb2N1bWVudHNcXEVTUE9MXFxTb2Z0d2FyZTFcXERFVlxcVmVoaWN1bGFyL3NyY1xcYXBwXFxwYWdlc1xcZGV0YWxsZS1zZXJ2aWNpb1xcZGV0YWxsZS1zZXJ2aWNpby5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2RldGFsbGUtc2VydmljaW8vZGV0YWxsZS1zZXJ2aWNpby5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFDRSxXQUFBO0VBQ0EsV0FBQTtFQUNBLFVBQUE7RUFDQSxpQ0FBQTtBQ0FOO0FERU07RUFDRSxVQUFBO0FDQVI7QURLRTtFQUNJLGdCQUFBO0VBQ0EscURBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLGlCQUFBO0VBRUg7Ozs7S0FBQTtBQ0NIO0FEUUU7RUFDRSxxQkFBQTtFQUNBLFdBQUE7QUNMSjtBRFFFO0VBQ0Usb0JBQUE7RUFDQSxXQUFBO0FDTEo7QURRRTtFQUNFLGlCQUFBO0FDTEo7QURPRTtFQUNFLGFBQUE7RUFDQSxXQUFBO0VBQ0Esa0NBQUE7RUFDQSw2QkFBQTtFQUNBLHFCQUFBO0FDSko7QURNRTtFQUNFLGFBQUE7RUFDQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLGdCQUFBO0VBQ0EsZUFBQTtFQUNBLDZDQUFBO0VBQ0EsdUJBQUE7RUFDQSxxQkFBQTtFQUVBLHNCQUFBO0FDSko7QURRRTtFQUNFLG1CQUFBO0FDTEo7QURPRTtFQUNFLGtCQUFBO0FDSko7QURPRTtFQUNFLFdBQUE7QUNKSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2RldGFsbGUtc2VydmljaW8vZGV0YWxsZS1zZXJ2aWNpby5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tY29udGVudCB7XHJcbiAgICAjbWFwYVZpYWplIHtcclxuICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgIGhlaWdodDogNTAlO1xyXG4gICAgICBvcGFjaXR5OiAwO1xyXG4gICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDE1MG1zIGVhc2UtaW47XHJcbiAgICAgIFxyXG4gICAgICAmLnNob3ctbWFwe1xyXG4gICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgI2hlYWRlcnsgXHJcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgtOTBkZWcsIzIwNDc4QiAsIzI0ODdDOSk7ICAgIFxyXG4gICAgICBjb2xvcjp3aGl0ZTtcclxuICAgICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgICBoZWlnaHQ6NTBweDtcclxuICAgICAgcGFkZGluZy10b3A6IDNweDtcclxuICAgICAgcGFkZGluZy1sZWZ0OiA1cHg7XHJcbiAgXHJcbiAgIC8qIGg1e1xyXG4gICAgaGVpZ2h0OiAxMDAlOyAgICBcclxuICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgjMjA0NzhjICwjMjQ4NWM5KTtcclxuICAgIGNvbG9yOndoaXRlO1xyXG4gICAgfSovXHJcbiAgXHJcbiAgfVxyXG4gIFxyXG4gIFxyXG4gICNjb25maXJtYXJ7XHJcbiAgICAtLWJhY2tncm91bmQ6ICNFNTI0MkY7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICB9XHJcbiAgXHJcbiAgI2ZpbmFsaXphcntcclxuICAgIC0tYmFja2dyb3VuZDojODA4Mjg5O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgfVxyXG4gIFxyXG4gIC5kZXRhbGxlc3tcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIH1cclxuICAjYm90b25lc3tcclxuICAgIGRpc3BsYXk6IGdyaWQ7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGdyaWQtdGVtcGxhdGUtcm93czpyZXBlYXQoMiw1MCUpIDsgXHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTtcclxuICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcclxuICB9XHJcbiAgI2NvbnRlbnR7XHJcbiAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgd2lkdGg6IDkwJTtcclxuICAgIGhlaWdodDogNDAlO1xyXG4gICAgcGFkZGluZy1sZWZ0OiA1JTtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgIGdyaWQtdGVtcGxhdGUtcm93czogMjRweCAyNHB4IHJlcGVhdCgzLDIwcHgpIDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYWxpZ24tY29udGVudDogY2VudGVyO1xyXG4gICAgLy9hbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgZ3JpZC1yb3c6IHJvdyBnYXAgMTBweDtcclxuICBcclxuICB9XHJcbiAgXHJcbiAgI2NoYXRidWJibGV7XHJcbiAgICAtLXBhZGRpbmctdG9wOiAxNXB4O1xyXG4gIH1cclxuICAjY2hhdGJ1YmJsZUZ7XHJcbiAgICBwYWRkaW5nLWxlZnQ6IDE1cHg7XHJcbiAgfVxyXG4gIFxyXG4gIGlvbi1mYWItYnV0dG9ue1xyXG4gICAgbWFyZ2luOjVweDtcclxuICB9IiwiaW9uLWNvbnRlbnQgI21hcGFWaWFqZSB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDUwJTtcbiAgb3BhY2l0eTogMDtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAxNTBtcyBlYXNlLWluO1xufVxuaW9uLWNvbnRlbnQgI21hcGFWaWFqZS5zaG93LW1hcCB7XG4gIG9wYWNpdHk6IDE7XG59XG5cbiNoZWFkZXIge1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoLTkwZGVnLCAjMjA0NzhCLCAjMjQ4N0M5KTtcbiAgY29sb3I6IHdoaXRlO1xuICBmb250LXNpemU6IDEycHg7XG4gIGhlaWdodDogNTBweDtcbiAgcGFkZGluZy10b3A6IDNweDtcbiAgcGFkZGluZy1sZWZ0OiA1cHg7XG4gIC8qIGg1e1xuICAgaGVpZ2h0OiAxMDAlOyAgICBcbiAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgjMjA0NzhjICwjMjQ4NWM5KTtcbiAgIGNvbG9yOndoaXRlO1xuICAgfSovXG59XG5cbiNjb25maXJtYXIge1xuICAtLWJhY2tncm91bmQ6ICNFNTI0MkY7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4jZmluYWxpemFyIHtcbiAgLS1iYWNrZ3JvdW5kOiM4MDgyODk7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4uZGV0YWxsZXMge1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuI2JvdG9uZXMge1xuICBkaXNwbGF5OiBncmlkO1xuICB3aWR0aDogMTAwJTtcbiAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiByZXBlYXQoMiwgNTAlKTtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1ldmVubHk7XG4gIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuI2NvbnRlbnQge1xuICBkaXNwbGF5OiBncmlkO1xuICB3aWR0aDogOTAlO1xuICBoZWlnaHQ6IDQwJTtcbiAgcGFkZGluZy1sZWZ0OiA1JTtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBncmlkLXRlbXBsYXRlLXJvd3M6IDI0cHggMjRweCByZXBlYXQoMywgMjBweCk7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gIGdyaWQtcm93OiByb3cgZ2FwIDEwcHg7XG59XG5cbiNjaGF0YnViYmxlIHtcbiAgLS1wYWRkaW5nLXRvcDogMTVweDtcbn1cblxuI2NoYXRidWJibGVGIHtcbiAgcGFkZGluZy1sZWZ0OiAxNXB4O1xufVxuXG5pb24tZmFiLWJ1dHRvbiB7XG4gIG1hcmdpbjogNXB4O1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController, PopoverController } from '@ionic/angular';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { ShareDataService } from 'src/app/services/share-data.service';\r\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\r\nimport { AngularFirestore, AngularFirestoreCollection, AngularFirestoreDocument } from '@angular/fire/firestore';\r\n\r\ndeclare var google;\r\n\r\n@Component({\r\n  selector: 'app-detalle-servicio',\r\n  templateUrl: './detalle-servicio.page.html',\r\n  styleUrls: ['./detalle-servicio.page.scss'],\r\n})\r\nexport class DetalleServicioPage implements OnInit {\r\n  locationCollection: AngularFirestoreCollection<any>;\r\n  location: Observable<any[]>\r\n  Position: AngularFirestoreDocument<any>;\r\n  PositionD: Observable<any>;\r\n  mapa=null;\r\n  marker=null;\r\n  markerD=null;\r\n  \r\n  watch:any;\r\n  origen: any;\r\n  destino: any;\r\n\r\n  //Numero del Cliente, debe llegar en la notificacion\r\n  numberClient:string = \"0989878654\";\r\n\r\n  \r\n  directionsService = new google.maps.DirectionsService();\r\n  directionsDisplay = new google.maps.DirectionsRenderer();\r\n\r\n  nombreNot: string =\"\";\r\n  nombreNotSubs: Subscription;\r\n \r\n\r\n  notObj: object={};\r\n  notObjSub: Subscription;\r\n\r\n  constructor(\r\n    private geolocation: Geolocation,\r\n    public alertController: AlertController,\r\n    public shareData: ShareDataService,\r\n    private router: Router,\r\n    private firestore: AngularFirestore,\r\n    public popoverController: PopoverController,\r\n    //private callNumber: CallNumber,\r\n  ) {\r\n    \r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    this.loadMap();\r\n    this.watchPosition();\r\n    this.watchDriverPos(31);\r\n  }\r\n\r\n  async loadMap() {\r\n\r\n    // create a new map by passing HTMLElement\r\n    const mapEle: HTMLElement = document.getElementById('mapaViaje');\r\n    const indicatorsEle: HTMLElement = document.getElementById('indicators');\r\n\r\n    // create map\r\n    this.mapa = await new google.maps.Map(mapEle, {\r\n      zoom: 17,\r\n      zoomControl:false,\r\n      mapTypeControl:false,\r\n      streetViewControl:false,\r\n      fullscreenControl:false\r\n    });\r\n    await this.directionsDisplay.setMap(this.mapa);\r\n    await google.maps.event.addListenerOnce(this.mapa, 'idle', () => {\r\n      mapEle.classList.add('show-map');\r\n      this.calculateRoute(this.shareData.notificacion.data.inicioCoords,this.shareData.notificacion.data.finCoords);\r\n    }); \r\n       \r\n  }\r\n\r\n  private calculateRoute(ini:any,fin:any){  \r\n    this.directionsService.route({\r\n      origin: JSON.parse(ini) ,\r\n      destination: JSON.parse(fin),\r\n      travelMode: google.maps.TravelMode.DRIVING,\r\n    }, (response, status)  => {\r\n      if (status === google.maps.DirectionsStatus.OK) {\r\n        this.directionsDisplay.setDirections(response);\r\n      } else {\r\n        alert('No se pudo cargar el mapa ' + status);\r\n      }\r\n    });\r\n  }\r\n\r\n  private watchPosition(){\r\n    this.watch= this.geolocation.watchPosition();\r\n    this.watch.subscribe((data)=>{\r\n      if(this.marker!=null){\r\n        this.marker.setMap(null);\r\n        console.log(\"entro\");\r\n      }\r\n      if (\"coords\" in data){\r\n        let lat=data.coords.latitude;\r\n        let lng=data.coords.longitude;\r\n        console.log(\"latitud \"+ lat);\r\n        console.log(\"longitud \"+ lng);\r\n        let latLng=new google.maps.LatLng(lat,lng);\r\n        this.marker = new google.maps.Marker({\r\n          map: this.mapa,\r\n          icon: new google.maps.MarkerImage('https://maps.gstatic.com/mapfiles/mobile/mobileimgs2.png',\r\n          new google.maps.Size(22, 22),\r\n          new google.maps.Point(0, 18),\r\n          new google.maps.Point(11, 11)),\r\n          position: latLng      \r\n        });\r\n      }\r\n      else {\r\n        console.log(\"ERROR WATCH POSITION\");\r\n      }\r\n    })\r\n  }\r\n  watchDriverPos(id: any){\r\n    this.PositionD= this.firestore.doc(`/posicion/${id}`).valueChanges()\r\n    \r\n    this.PositionD.subscribe(val=>{ \r\n      console.log(val.location)\r\n      const myLatLng = {\r\n        lat: JSON.parse(val.location).lat,\r\n        lng: JSON.parse(val.location).lng\r\n      };\r\n      this.markerD=  new google.maps.Marker({\r\n        map: this.mapa ,\r\n        icon: new google.maps.MarkerImage('assets/icon/pointer_proveed.png',\r\n         null,null,null,\r\n         new google.maps.Size(34, 45)),  \r\n         position: myLatLng  \r\n       });\r\n      })\r\n  }\r\n\r\n}\r\n"]}