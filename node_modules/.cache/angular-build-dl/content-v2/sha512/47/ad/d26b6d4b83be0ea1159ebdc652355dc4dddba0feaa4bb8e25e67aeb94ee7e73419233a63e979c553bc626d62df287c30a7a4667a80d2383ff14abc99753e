{"version":3,"sources":["webpack:///src/app/pages/detalle-servicio/detalle-servicio.page.html","webpack:///src/app/pages/detalle-servicio/detalle-servicio-routing.module.ts","webpack:///src/app/pages/detalle-servicio/detalle-servicio.module.ts","webpack:///src/app/pages/detalle-servicio/detalle-servicio.page.scss","webpack:///src/app/pages/detalle-servicio/detalle-servicio.page.ts"],"names":["routes","path","component","DetalleServicioPageRoutingModule","imports","forChild","exports","DetalleServicioPageModule","declarations","DetalleServicioPage","geolocation","alertController","shareData","router","firestore","popoverController","mapa","marker","markerD","numberClient","directionsService","google","maps","DirectionsService","directionsDisplay","DirectionsRenderer","nombreNot","notObj","idConductor","localStorage","getItem","console","log","loadMap","watchPosition","watchDriverPos","mapEle","document","getElementById","indicatorsEle","Map","zoom","zoomControl","mapTypeControl","streetViewControl","fullscreenControl","setMap","event","addListenerOnce","classList","add","calculateRoute","notificacion","data","inicioCoords","finCoords","ini","fin","route","origin","JSON","parse","destination","travelMode","TravelMode","DRIVING","response","status","DirectionsStatus","OK","setDirections","alert","watch","subscribe","lat","coords","latitude","lng","longitude","latLng","LatLng","Marker","map","icon","MarkerImage","Size","Point","position","id","PositionD","doc","valueChanges","val","location","myLatLng","selector","template"],"mappings":"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","file":"pages-detalle-servicio-detalle-servicio-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar class=\\\"toolbar-bg\\\">\\r\\n    <div class=\\\"toolbar-content\\\">\\r\\n      <ion-button fill=\\\"clear\\\" slot=\\\"start\\\">\\r\\n        <ion-menu-button color=\\\"light\\\" slot=\\\"start\\\"></ion-menu-button>\\r\\n      </ion-button>\\r\\n\\r\\n\\r\\n      <ion-title class=\\\"ion-text-center\\\" text-capitalize>\\r\\n        Servicio en curso\\r\\n      </ion-title>\\r\\n\\r\\n\\r\\n      <ion-avatar>\\r\\n        <img src=\\\"assets/icon/avatar.png\\\">\\r\\n      </ion-avatar>\\r\\n\\r\\n    </div>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div id=\\\"mapaViaje\\\"></div>\\r\\n  <div id=\\\"header\\\">\\r\\n    <h5>DETALLE DEL SERVICIO</h5>\\r\\n  </div>\\r\\n\\r\\n  <div id=\\\"content\\\">\\r\\n    <ion-row><strong>Nombre: </strong>  {{shareData.detallesDriver.data.nombreConductor}} {{shareData.detallesDriver.data.apellidoConductor}}</ion-row>\\r\\n    <ion-row><strong>Calificacion: </strong>  {{shareData.detallesDriver.data.calificacionConductor}}</ion-row>\\r\\n    <ion-row><strong>Celular: </strong>  {{shareData.detallesDriver.data.telefonoConductor}}</ion-row>\\r\\n    \\r\\n    <ion-row><strong>Modelo del vehículo: </strong>  {{shareData.detallesDriver.data.modeloVehiculo}}</ion-row>\\r\\n    <ion-row><strong>Placa del vehículo: </strong>  {{shareData.detallesDriver.data.placaVehiculo}}</ion-row>\\r\\n    <ion-row><strong>Color del vehículo: </strong>  {{shareData.detallesDriver.data.colorVehiculo}}</ion-row>\\r\\n  </div>\\r\\n\\r\\n  <!-- fab que contiene los botones para chat y llamada -->\\r\\n  <ion-fab horizontal=\\\"end\\\" vertical=\\\"bottom\\\" slot=\\\"fixed\\\">\\r\\n    <ion-fab-button color=\\\"light\\\">\\r\\n      <ion-icon name=\\\"share\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n    <ion-fab-list side=\\\"top\\\">\\r\\n      <ion-fab-button color=\\\"primary\\\" (click)=\\\"chatWithClient()\\\">\\r\\n        <ion-icon name=\\\"chatbubble-outline\\\"></ion-icon>\\r\\n      </ion-fab-button>\\r\\n    </ion-fab-list>\\r\\n    \\r\\n    <ion-fab-list side=\\\"start\\\">\\r\\n      <ion-fab-button color=\\\"light\\\" (click)=\\\"callByCellphone()\\\">\\r\\n        <ion-icon name=\\\"call-outline\\\"></ion-icon>\\r\\n      </ion-fab-button>\\r\\n    </ion-fab-list>\\r\\n  </ion-fab>\\r\\n  \\r\\n\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DetalleServicioPage } from './detalle-servicio.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DetalleServicioPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DetalleServicioPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DetalleServicioPageRoutingModule } from './detalle-servicio-routing.module';\r\n\r\nimport { DetalleServicioPage } from './detalle-servicio.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DetalleServicioPageRoutingModule\r\n  ],\r\n  declarations: [DetalleServicioPage]\r\n})\r\nexport class DetalleServicioPageModule {}\r\n","export default \"ion-content #mapaViaje {\\n  width: 100%;\\n  height: 50%;\\n  opacity: 0;\\n  transition: opacity 150ms ease-in;\\n}\\nion-content #mapaViaje.show-map {\\n  opacity: 1;\\n}\\n#header {\\n  text-align: left;\\n  background: linear-gradient(-90deg, #20478B, #2487C9);\\n  color: white;\\n  font-size: 12px;\\n  height: 50px;\\n  padding-top: 3px;\\n  padding-left: 5px;\\n  /* h5{\\n  height: 100%;    \\n  background: linear-gradient(#20478c ,#2485c9);\\n  color:white;\\n  }*/\\n}\\n#confirmar {\\n  --background: #E5242F;\\n  width: 100%;\\n}\\n#finalizar {\\n  --background: #808289;\\n  width: 100%;\\n}\\n.detalles {\\n  font-weight: bold;\\n}\\n#botones {\\n  display: grid;\\n  width: 100%;\\n  grid-template-rows: repeat(2, 50%);\\n  justify-content: space-evenly;\\n  align-content: center;\\n}\\n#content {\\n  display: grid;\\n  width: 90%;\\n  height: 40%;\\n  padding-left: 5%;\\n  font-size: 16px;\\n  grid-template-rows: 24px 24px repeat(3, 20px);\\n  justify-content: center;\\n  align-content: center;\\n  grid-row: row gap 10px;\\n}\\n#chatbubble {\\n  --padding-top: 15px;\\n}\\n#chatbubbleF {\\n  padding-left: 15px;\\n}\\nion-fab-button {\\n  margin: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZGV0YWxsZS1zZXJ2aWNpby9DOlxcVXNlcnNcXG1lZGluXFxEZXNrdG9wXFxEaXN0cmlidWlkb3Mvc3JjXFxhcHBcXHBhZ2VzXFxkZXRhbGxlLXNlcnZpY2lvXFxkZXRhbGxlLXNlcnZpY2lvLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvZGV0YWxsZS1zZXJ2aWNpby9kZXRhbGxlLXNlcnZpY2lvLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDSTtFQUNJLFdBQUE7RUFDQSxXQUFBO0VBQ0EsVUFBQTtFQUNBLGlDQUFBO0FDQVI7QURDUTtFQUNJLFVBQUE7QUNDWjtBRElBO0VBQ0ksZ0JBQUE7RUFDQSxxREFBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0VBQ0EsWUFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQTs7OztJQUFBO0FDR0o7QURJQTtFQUNJLHFCQUFBO0VBQ0EsV0FBQTtBQ0RKO0FESUE7RUFDSSxxQkFBQTtFQUNBLFdBQUE7QUNESjtBRElBO0VBQ0ksaUJBQUE7QUNESjtBRElBO0VBQ0ksYUFBQTtFQUNBLFdBQUE7RUFDQSxrQ0FBQTtFQUNBLDZCQUFBO0VBQ0EscUJBQUE7QUNESjtBRElBO0VBQ0ksYUFBQTtFQUNBLFVBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0VBQ0EsNkNBQUE7RUFDQSx1QkFBQTtFQUNBLHFCQUFBO0VBRUEsc0JBQUE7QUNGSjtBREtBO0VBQ0ksbUJBQUE7QUNGSjtBREtBO0VBQ0ksa0JBQUE7QUNGSjtBREtBO0VBQ0ksV0FBQTtBQ0ZKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvZGV0YWxsZS1zZXJ2aWNpby9kZXRhbGxlLXNlcnZpY2lvLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50IHtcclxuICAgICNtYXBhVmlhamUge1xyXG4gICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgIGhlaWdodDogNTAlO1xyXG4gICAgICAgIG9wYWNpdHk6IDA7XHJcbiAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAxNTBtcyBlYXNlLWluO1xyXG4gICAgICAgICYuc2hvdy1tYXAge1xyXG4gICAgICAgICAgICBvcGFjaXR5OiAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuI2hlYWRlciB7XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KC05MGRlZywgIzIwNDc4QiwgIzI0ODdDOSk7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICBoZWlnaHQ6IDUwcHg7XHJcbiAgICBwYWRkaW5nLXRvcDogM3B4O1xyXG4gICAgcGFkZGluZy1sZWZ0OiA1cHg7XHJcbiAgICAvKiBoNXtcclxuICAgIGhlaWdodDogMTAwJTsgICAgXHJcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoIzIwNDc4YyAsIzI0ODVjOSk7XHJcbiAgICBjb2xvcjp3aGl0ZTtcclxuICAgIH0qL1xyXG59XHJcblxyXG4jY29uZmlybWFyIHtcclxuICAgIC0tYmFja2dyb3VuZDogI0U1MjQyRjtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4jZmluYWxpemFyIHtcclxuICAgIC0tYmFja2dyb3VuZDogIzgwODI4OTtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uZGV0YWxsZXMge1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbiNib3RvbmVzIHtcclxuICAgIGRpc3BsYXk6IGdyaWQ7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGdyaWQtdGVtcGxhdGUtcm93czogcmVwZWF0KDIsIDUwJSk7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTtcclxuICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcclxufVxyXG5cclxuI2NvbnRlbnQge1xyXG4gICAgZGlzcGxheTogZ3JpZDtcclxuICAgIHdpZHRoOiA5MCU7XHJcbiAgICBoZWlnaHQ6IDQwJTtcclxuICAgIHBhZGRpbmctbGVmdDogNSU7XHJcbiAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IDI0cHggMjRweCByZXBlYXQoMywgMjBweCk7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIC8vYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGdyaWQtcm93OiByb3cgZ2FwIDEwcHg7XHJcbn1cclxuXHJcbiNjaGF0YnViYmxlIHtcclxuICAgIC0tcGFkZGluZy10b3A6IDE1cHg7XHJcbn1cclxuXHJcbiNjaGF0YnViYmxlRiB7XHJcbiAgICBwYWRkaW5nLWxlZnQ6IDE1cHg7XHJcbn1cclxuXHJcbmlvbi1mYWItYnV0dG9uIHtcclxuICAgIG1hcmdpbjogNXB4O1xyXG59IiwiaW9uLWNvbnRlbnQgI21hcGFWaWFqZSB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDUwJTtcbiAgb3BhY2l0eTogMDtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAxNTBtcyBlYXNlLWluO1xufVxuaW9uLWNvbnRlbnQgI21hcGFWaWFqZS5zaG93LW1hcCB7XG4gIG9wYWNpdHk6IDE7XG59XG5cbiNoZWFkZXIge1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoLTkwZGVnLCAjMjA0NzhCLCAjMjQ4N0M5KTtcbiAgY29sb3I6IHdoaXRlO1xuICBmb250LXNpemU6IDEycHg7XG4gIGhlaWdodDogNTBweDtcbiAgcGFkZGluZy10b3A6IDNweDtcbiAgcGFkZGluZy1sZWZ0OiA1cHg7XG4gIC8qIGg1e1xuICBoZWlnaHQ6IDEwMCU7ICAgIFxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoIzIwNDc4YyAsIzI0ODVjOSk7XG4gIGNvbG9yOndoaXRlO1xuICB9Ki9cbn1cblxuI2NvbmZpcm1hciB7XG4gIC0tYmFja2dyb3VuZDogI0U1MjQyRjtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbiNmaW5hbGl6YXIge1xuICAtLWJhY2tncm91bmQ6ICM4MDgyODk7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4uZGV0YWxsZXMge1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuI2JvdG9uZXMge1xuICBkaXNwbGF5OiBncmlkO1xuICB3aWR0aDogMTAwJTtcbiAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiByZXBlYXQoMiwgNTAlKTtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1ldmVubHk7XG4gIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuI2NvbnRlbnQge1xuICBkaXNwbGF5OiBncmlkO1xuICB3aWR0aDogOTAlO1xuICBoZWlnaHQ6IDQwJTtcbiAgcGFkZGluZy1sZWZ0OiA1JTtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBncmlkLXRlbXBsYXRlLXJvd3M6IDI0cHggMjRweCByZXBlYXQoMywgMjBweCk7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gIGdyaWQtcm93OiByb3cgZ2FwIDEwcHg7XG59XG5cbiNjaGF0YnViYmxlIHtcbiAgLS1wYWRkaW5nLXRvcDogMTVweDtcbn1cblxuI2NoYXRidWJibGVGIHtcbiAgcGFkZGluZy1sZWZ0OiAxNXB4O1xufVxuXG5pb24tZmFiLWJ1dHRvbiB7XG4gIG1hcmdpbjogNXB4O1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController, PopoverController } from '@ionic/angular';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { ShareDataService } from 'src/app/services/share-data.service';\r\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\r\nimport { AngularFirestore, AngularFirestoreCollection, AngularFirestoreDocument } from '@angular/fire/firestore';\r\n\r\ndeclare var google;\r\n\r\n@Component({\r\n  selector: 'app-detalle-servicio',\r\n  templateUrl: './detalle-servicio.page.html',\r\n  styleUrls: ['./detalle-servicio.page.scss'],\r\n})\r\nexport class DetalleServicioPage implements OnInit {\r\n  locationCollection: AngularFirestoreCollection<any>;\r\n  location: Observable<any[]>\r\n  Position: AngularFirestoreDocument<any>;\r\n  PositionD: Observable<any>;\r\n  mapa=null;\r\n  marker=null;\r\n  markerD=null;\r\n  \r\n  watch:any;\r\n  origen: any;\r\n  destino: any;\r\n\r\n  //Numero del Cliente, debe llegar en la notificacion\r\n  numberClient:string = \"0989878654\";\r\n\r\n  \r\n  directionsService = new google.maps.DirectionsService();\r\n  directionsDisplay = new google.maps.DirectionsRenderer();\r\n\r\n  nombreNot: string =\"\";\r\n  nombreNotSubs: Subscription;\r\n \r\n\r\n  notObj: object={};\r\n  notObjSub: Subscription;\r\n  idConductor:any\r\n  constructor(\r\n    private geolocation: Geolocation,\r\n    public alertController: AlertController,\r\n    public shareData: ShareDataService,\r\n    private router: Router,\r\n    private firestore: AngularFirestore,\r\n    public popoverController: PopoverController,\r\n    //private callNumber: CallNumber,\r\n  ) {\r\n    this.idConductor=localStorage.getItem('idConductor')\r\n    console.log(this.idConductor)\r\n  }\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    this.loadMap();\r\n    this.watchPosition();\r\n    this.watchDriverPos(this.idConductor);\r\n  }\r\n\r\n  async loadMap() {\r\n\r\n    // create a new map by passing HTMLElement\r\n    const mapEle: HTMLElement = document.getElementById('mapaViaje');\r\n    const indicatorsEle: HTMLElement = document.getElementById('indicators');\r\n\r\n    // create map\r\n    this.mapa = await new google.maps.Map(mapEle, {\r\n      zoom: 17,\r\n      zoomControl:false,\r\n      mapTypeControl:false,\r\n      streetViewControl:false,\r\n      fullscreenControl:false\r\n    });\r\n    await this.directionsDisplay.setMap(this.mapa);\r\n    await google.maps.event.addListenerOnce(this.mapa, 'idle', () => {\r\n      mapEle.classList.add('show-map');\r\n      this.calculateRoute(this.shareData.notificacion.data.inicioCoords,this.shareData.notificacion.data.finCoords);\r\n    }); \r\n       \r\n  }\r\n\r\n  private calculateRoute(ini:any,fin:any){  \r\n    this.directionsService.route({\r\n      origin: JSON.parse(ini) ,\r\n      destination: JSON.parse(fin),\r\n      travelMode: google.maps.TravelMode.DRIVING,\r\n    }, (response, status)  => {\r\n      if (status === google.maps.DirectionsStatus.OK) {\r\n        this.directionsDisplay.setDirections(response);\r\n      } else {\r\n        alert('No se pudo cargar el mapa ' + status);\r\n      }\r\n    });\r\n  }\r\n\r\n  private watchPosition(){\r\n    this.watch= this.geolocation.watchPosition();\r\n    this.watch.subscribe((data)=>{\r\n      if(this.marker!=null){\r\n        this.marker.setMap(null);\r\n        console.log(\"entro\");\r\n      }\r\n      if (\"coords\" in data){\r\n        let lat=data.coords.latitude;\r\n        let lng=data.coords.longitude;\r\n        console.log(\"latitud \"+ lat);\r\n        console.log(\"longitud \"+ lng);\r\n        let latLng=new google.maps.LatLng(lat,lng);\r\n        this.marker = new google.maps.Marker({\r\n          map: this.mapa,\r\n          icon: new google.maps.MarkerImage('https://maps.gstatic.com/mapfiles/mobile/mobileimgs2.png',\r\n          new google.maps.Size(22, 22),\r\n          new google.maps.Point(0, 18),\r\n          new google.maps.Point(11, 11)),\r\n          position: latLng      \r\n        });\r\n      }\r\n      else {\r\n        console.log(\"ERROR WATCH POSITION\");\r\n      }\r\n    })\r\n  }\r\n  watchDriverPos(id: any){\r\n    this.PositionD= this.firestore.doc(`/posicion/${id}`).valueChanges()\r\n    \r\n    this.PositionD.subscribe(val=>{ \r\n      console.log(val.location)\r\n      const myLatLng = {\r\n        lat: JSON.parse(val.location).lat,\r\n        lng: JSON.parse(val.location).lng\r\n      };\r\n      this.markerD=  new google.maps.Marker({\r\n        map: this.mapa ,\r\n        icon: new google.maps.MarkerImage('assets/icon/pointer_proveed.png',\r\n         null,null,null,\r\n         new google.maps.Size(34, 45)),  \r\n         position: myLatLng  \r\n       });\r\n      })\r\n  }\r\n\r\n}\r\n"]}