{"version":3,"sources":["./src/app/pages/detalle-servicio/detalle-servicio.page.html","./src/app/pages/detalle-servicio/detalle-servicio-routing.module.ts","./src/app/pages/detalle-servicio/detalle-servicio.module.ts","./src/app/pages/detalle-servicio/detalle-servicio.page.scss","./src/app/pages/detalle-servicio/detalle-servicio.page.ts"],"names":[],"mappings":"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","file":"pages-detalle-servicio-detalle-servicio-module-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar class=\\\"toolbar-bg\\\">\\r\\n    <div class=\\\"toolbar-content\\\">\\r\\n      <ion-button fill=\\\"clear\\\" slot=\\\"start\\\">\\r\\n        <ion-menu-button color=\\\"light\\\" slot=\\\"start\\\"></ion-menu-button>\\r\\n      </ion-button>\\r\\n\\r\\n\\r\\n      <ion-title class=\\\"ion-text-center\\\" text-capitalize>\\r\\n        Servicio en curso\\r\\n      </ion-title>\\r\\n\\r\\n\\r\\n      <ion-avatar>\\r\\n        <img src=\\\"assets/icon/avatar.png\\\">\\r\\n      </ion-avatar>\\r\\n\\r\\n    </div>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div #map id=\\\"mapaViaje\\\"></div>\\r\\n  <div id=\\\"header\\\">\\r\\n    <h5>DETALLE DEL SERVICIO</h5>\\r\\n  </div>\\r\\n\\r\\n  <div id=\\\"content\\\">\\r\\n    <ion-row><strong>Conductor: </strong>{{shareData.detallesDriver.data.nombre}} {{shareData.detallesDriver.data.apellido}}</ion-row>\\r\\n    <ion-row><strong>Calificacion: </strong>{{shareData.detallesDriver.data.calificacion}}</ion-row>\\r\\n    <ion-row><strong>Numero conductor: </strong>{{shareData.detallesDriver.data.telefono}}</ion-row>\\r\\n    <ion-row><strong>Modelo del vehículo: </strong>{{shareData.detallesDriver.data.modelo}}</ion-row>\\r\\n    <ion-row><strong>Placa del vehículo: </strong>{{shareData.detallesDriver.data.placa}}</ion-row>\\r\\n    <ion-row><strong>Color del vehículo: </strong>{{shareData.detallesDriver.data.color}}</ion-row>\\r\\n  </div>\\r\\n\\r\\n  <!-- fab que contiene los botones para chat y llamada -->\\r\\n  <ion-fab vertical=\\\"center\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" color=\\\"tertiary\\\">\\r\\n    <ion-fab-button id=\\\"chatbubble\\\" (click)=\\\"chatWithClient()\\\">\\r\\n      <ion-icon name=\\\"chatbubble-outline\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n    \\r\\n    <ion-fab-button id=\\\"callbubble\\\" (click)=\\\"callByCellphone()\\\">\\r\\n      <ion-icon name=\\\"call-outline\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab>\\r\\n\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DetalleServicioPage } from './detalle-servicio.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DetalleServicioPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DetalleServicioPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DetalleServicioPageRoutingModule } from './detalle-servicio-routing.module';\r\n\r\nimport { DetalleServicioPage } from './detalle-servicio.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DetalleServicioPageRoutingModule\r\n  ],\r\n  declarations: [DetalleServicioPage]\r\n})\r\nexport class DetalleServicioPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2RldGFsbGUtc2VydmljaW8vZGV0YWxsZS1zZXJ2aWNpby5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController, PopoverController } from '@ionic/angular';\r\nimport { Subscription } from 'rxjs';\r\nimport { ShareDataService } from 'src/app/services/share-data.service';\r\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\r\n\r\ndeclare var google;\r\n\r\n@Component({\r\n  selector: 'app-detalle-servicio',\r\n  templateUrl: './detalle-servicio.page.html',\r\n  styleUrls: ['./detalle-servicio.page.scss'],\r\n})\r\nexport class DetalleServicioPage implements OnInit {\r\n\r\n  mapa=null;\r\n  marker=null;\r\n  watch:any;\r\n  origen: any;\r\n  destino: any;\r\n\r\n  //Numero del Cliente, debe llegar en la notificacion\r\n  numberClient:string = \"0989878654\";\r\n\r\n  \r\n  directionsService = new google.maps.DirectionsService();\r\n  directionsDisplay = new google.maps.DirectionsRenderer();\r\n\r\n  nombreNot: string =\"\";\r\n  nombreNotSubs: Subscription;\r\n\r\n\r\n  notObj: object={};\r\n  notObjSub: Subscription;\r\n\r\n  constructor(\r\n    private geolocation: Geolocation,\r\n    public alertController: AlertController,\r\n    public shareData: ShareDataService,\r\n    private router: Router,\r\n    public popoverController: PopoverController,\r\n    //private callNumber: CallNumber,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    this.loadMap();\r\n    this.watchPosition();\r\n  }\r\n\r\n  async loadMap() {\r\n\r\n    // create a new map by passing HTMLElement\r\n    const mapEle: HTMLElement = document.getElementById('mapaViaje');\r\n    const indicatorsEle: HTMLElement = document.getElementById('indicators');\r\n\r\n    // create map\r\n    this.mapa = await new google.maps.Map(mapEle, {\r\n      zoom: 17,\r\n      zoomControl:false,\r\n      mapTypeControl:false,\r\n      streetViewControl:false,\r\n      fullscreenControl:false\r\n    });\r\n    await this.directionsDisplay.setMap(this.mapa);\r\n    await google.maps.event.addListenerOnce(this.mapa, 'idle', () => {\r\n      mapEle.classList.add('show-map');\r\n      this.calculateRoute(this.shareData.notificacion.data.inicioCoords,this.shareData.notificacion.data.finCoords);\r\n    });    \r\n  }\r\n\r\n  private calculateRoute(ini:any,fin:any){  \r\n    this.directionsService.route({\r\n      origin: JSON.parse(ini) ,\r\n      destination: JSON.parse(fin),\r\n      travelMode: google.maps.TravelMode.DRIVING,\r\n    }, (response, status)  => {\r\n      if (status === google.maps.DirectionsStatus.OK) {\r\n        this.directionsDisplay.setDirections(response);\r\n      } else {\r\n        alert('No se pudo cargar el mapa ' + status);\r\n      }\r\n    });\r\n  }\r\n\r\n  private watchPosition(){\r\n    this.watch= this.geolocation.watchPosition();\r\n    this.watch.subscribe((data)=>{\r\n      if(this.marker!=null){\r\n        this.marker.setMap(null);\r\n        console.log(\"entro\");\r\n      }\r\n      if (\"coords\" in data){\r\n        let lat=data.coords.latitude;\r\n        let lng=data.coords.longitude;\r\n        console.log(\"latitud \"+ lat);\r\n        console.log(\"longitud \"+ lng);\r\n        let latLng=new google.maps.LatLng(lat,lng);\r\n        this.marker = new google.maps.Marker({\r\n          map: this.mapa,\r\n          icon: new google.maps.MarkerImage('https://maps.gstatic.com/mapfiles/mobile/mobileimgs2.png',\r\n          new google.maps.Size(22, 22),\r\n          new google.maps.Point(0, 18),\r\n          new google.maps.Point(11, 11)),\r\n          position: latLng      \r\n        });\r\n      }\r\n      else {\r\n        console.log(\"ERROR WATCH POSITION\");\r\n      }\r\n    })\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}